<!doctype html>
<html>
<head>
<meta charset='utf-8' />
<title>Creating sublayers using Cartodb in leaflet powered maps </title>
<meta name='viewport' content='initial-scale=1, maximum-scale=1, user-scalable=no' /> 

<link rel=’stylesheet’ href=’http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css’></script>
<link rel='stylesheet' href='http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css' />
<script src=’http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js’></script>

<script src='http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js'></script>
</head>
<body>
<div id='map' style='width:600px;height:400px'></div>
<script>
var map = new L.map('map', {center: [9, 7], zoom: 4 })
L.tileLayer('https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ', {
         attribution: attr
       }).addTo(map);

var layerUrl = 'https://mayotunde.cartodb.com/api/v2/viz/cbb7fd66-7a70-11e5-98ab-0e5db1731f59/viz.json';

var sublayer = {

sql: ‘SELECT* FROM africa_populated_cities_2 WHERE citytype =’cosmopolis’ ‘,

cartocss: ‘#table_name{polygon-fill: #e9b50b; opacity: 0.3; line-width: 3})’

}

cartodb.createLayer(map, layerUrl)

.addTo(map)

.on('done', function(layer) {

layer.getSubLayer(0).set(sublayer);
}).on('error', function() {
          });
}

window.onload = main;

